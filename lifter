#!/usr/bin/env python
# -*- indent-tabs-mode: t -*-

import sys, termios, tty
from mapupdater import controller

lambda_map = [[]]

with open("maps/contest1.map") as m:
	for line in m:
		for c in line:
			if c == '\n':
				lambda_map.insert(0,[])
				continue
			lambda_map[0].append(c)

lambda_map.pop(0)
print lambda_map

cont = controller(lambda_map)
while 1:
	fd = sys.stdin.fileno()
	old_settings = termios.tcgetattr(fd)
	tty.setraw(fd)
	key = sys.stdin.read(1)
	if key == 'w':
		termios.tcsetattr(fd, termios.TCSANOW, old_settings)
		os.system("reset")
		sys.exit(0)
	cont.set_movement(key)
	print key


